% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/interpolate_newdata.R
\encoding{UTF-8}
\name{interpolate_newdata}
\alias{interpolate_newdata}
\title{Returns a data.frame with all combos of predictors}
\usage{
interpolate_newdata(
  fit,
  facet_by = NULL,
  x_values = get_x_values(fit, facet_by)
)
}
\arguments{
\item{fit}{An \code{mcpfit} object.}

\item{facet_by}{Character vector. Names of categorical data columns to split to facets.
Can be varying or RHS categoricals.}

\item{x_values}{Numeric vector of x-values to interpolate at.}
}
\value{
\code{tibble} with
\itemize{
\item Cols for par_x
\item unique levels combos of factorial vars
\item interpolated continuous vars (interpolated within each factorial cell) (fills down/up if outside observed region)
}
}
\description{
This function is used to synthesize predictors for all combos of RHS predictors.
It is used internally in \code{plot.mcpfit()} and may be useful if you want to
build your own custom plot.
}
\details{
The \code{par_x} variable will be interpolated with higher resolution around the
change points where the values can change abruptly, but lower resolution in
between to speed up the computation.

Categorical variables are combined factorially (all level combos) and all
continuous variables are interpolated at the x-values (see above paragraph) and
applied to all factor-combos.
}
\examples{
\dontrun{
# Get predictors for a fit
fit = mcp_example("multiple")
newdata = interpolate_newdata(fit)

# Fit summary
fitted(fit, newdata)

# Predictions for each sample
prediction = predict(fit, newdata, summary = FALSE)
prediction[, c(".chain", ".iteration", ".draw", "x", "group", "z", "predict")]

# Custom plot
library(ggplot2)
newdata = interpolate_newdata(fit)
plotdata = fitted(fit, newdata)
ggplot(plotdata, aes(x = x, y = fitted, color = group)) +
  geom_ribbon(aes(ymin = `Q2.5`, ymax = `Q97.5`, fill = group), alpha = 0.3) +
  geom_line(lwd = 2) +
  geom_point(aes(y = y), data = fit$data)
}
}
\author{
Jonas Kristoffer Lindel√∏v \email{jonas@lindeloev.dk}
}
